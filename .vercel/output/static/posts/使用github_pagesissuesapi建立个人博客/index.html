<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width" name=viewport><link href=/favicon.ico rel=icon type=image/svg+xml><link href=https://mliu.me/posts/%E4%BD%BF%E7%94%A8github_pagesissuesapi%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ rel=canonical><meta content="Astro v2.10.15" name=generator><title>使用github pages + issues + api建立个人博客</title><meta content="使用github pages + issues + api建立个人博客" name=title><meta content="简单易行不要钱。 `不需要数据库，不需要服务器，不需要域名`， 完全自定义的纯HTML/JS/CSS代码，不需要学各种static site generator的玩法，又能实现独一无二的个人博客。" name=description><meta content="Martin Liu" name=author><link href=/sitemap-index.xml rel=sitemap><meta content="使用github pages + issues + api建立个人博客" property=og:title><meta content="简单易行不要钱。 `不需要数据库，不需要服务器，不需要域名`， 完全自定义的纯HTML/JS/CSS代码，不需要学各种static site generator的玩法，又能实现独一无二的个人博客。" property=og:description><meta content=https://mliu.me/posts/%E4%BD%BF%E7%94%A8github_pagesissuesapi%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ property=og:url><meta content=https://mliu.me/%E4%BD%BF%E7%94%A8github%20pages%20+%20issues%20+%20api%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.png property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://mliu.me/posts/%E4%BD%BF%E7%94%A8github_pagesissuesapi%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ property=twitter:url><meta content="使用github pages + issues + api建立个人博客" property=twitter:title><meta content="简单易行不要钱。 `不需要数据库，不需要服务器，不需要域名`， 完全自定义的纯HTML/JS/CSS代码，不需要学各种static site generator的玩法，又能实现独一无二的个人博客。" property=twitter:description><meta content=https://mliu.me/%E4%BD%BF%E7%94%A8github%20pages%20+%20issues%20+%20api%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.png property=twitter:image><link href=https://fonts.googleapis.com rel=preconnect><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap" rel=stylesheet><script src=/toggle-theme.js></script><link href=/_astro/about.749ae34c.css rel=stylesheet /><link href=/_astro/about.6e6daff0.css rel=stylesheet /><link href=/_astro/_slug_.40cf44c5.css rel=stylesheet /><link href=/_astro/_slug_.41a32359.css rel=stylesheet /><link href=/_astro/_slug_.3b14054e.css rel=stylesheet /><link href=/_astro/_slug_.906d67ca.css rel=stylesheet /><script type=module>const e=document.querySelector(".hamburger-menu"),n=document.querySelector(".menu-icon"),u=document.querySelector("#menu-items");e?.addEventListener("click",(()=>{const t="true"===e.getAttribute("aria-expanded");n?.classList.toggle("is-active"),e.setAttribute("aria-expanded",t?"false":"true"),e.setAttribute("aria-label",t?"Open Menu":"Close Menu"),u?.classList.toggle("display-none")}))</script><script src=/_astro/page.7d71c7ef.js type=module></script></head><body><header class=astro-3EF6KSR2><a href=#main-content class=astro-3EF6KSR2 id=skip-to-content>Skip to content</a><div class="astro-3EF6KSR2 nav-container"><div class="astro-3EF6KSR2 top-nav-wrap"><a href=/ class="astro-3EF6KSR2 logo">Martin Liu</a><nav class=astro-3EF6KSR2 id=nav-menu><button class="astro-3EF6KSR2 focus-outline hamburger-menu" aria-label="Open Menu" aria-controls=menu-items aria-expanded=false><svg class="astro-3EF6KSR2 menu-icon" xmlns=http://www.w3.org/2000/svg stroke-linecap=round stroke-linejoin=round fill=none height=24 stroke=currentColor stroke-width=1.5 viewBox="0 0 24 24" width=24><line x1=7 x2=21 y1=12 y2=12 class="line astro-3EF6KSR2"></line><line x1=3 x2=21 y1=6 y2=6 class="line astro-3EF6KSR2"></line><line x1=12 x2=21 y1=18 y2=18 class="line astro-3EF6KSR2"></line><line x1=18 x2=6 y1=6 y2=18 class="astro-3EF6KSR2 close"></line><line x1=6 x2=18 y1=6 y2=18 class="astro-3EF6KSR2 close"></line></svg></button><ul class="astro-3EF6KSR2 display-none sm:flex" id=menu-items><li class=astro-3EF6KSR2><a href=/posts class=astro-3EF6KSR2>Posts</a></li><li class=astro-3EF6KSR2><a href=/tags class=astro-3EF6KSR2>Tags</a></li><li class=astro-3EF6KSR2><a href=/about class=astro-3EF6KSR2>About</a></li><li class=astro-3EF6KSR2><a href=/search class="astro-3EF6KSR2 focus-outline astro-5EUNQZKT group inline-block p-3 sm:p-1" title=Search tabindex=0 aria-label=search><svg class="astro-3EF6KSR2 scale-125 sm:scale-100" xmlns=http://www.w3.org/2000/svg><path d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" class=astro-3EF6KSR2></path></svg></a></li><li class=astro-3EF6KSR2><a href=/rss.xml class="astro-3EF6KSR2 rss-link" title="RSS Feed" aria-label="rss feed" target=_blank><svg class="astro-3EF6KSR2 icon icon-tabler icon-tabler-rss" xmlns=http://www.w3.org/2000/svg stroke-linecap=round stroke-linejoin=round fill=none height=24 stroke=currentColor stroke-width=2 viewBox="0 0 27 27" width=24><path d="M0 0h24v24H0z" class=astro-3EF6KSR2 fill=none stroke=none></path><path d="M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" class=astro-3EF6KSR2></path><path d="M4 4a16 16 0 0 1 16 16" class=astro-3EF6KSR2></path><path d="M4 11a9 9 0 0 1 9 9" class=astro-3EF6KSR2></path></svg></a></li><li class=astro-3EF6KSR2><button class="astro-3EF6KSR2 focus-outline" aria-label=auto aria-live=polite id=theme-btn title="Toggles light & dark"><svg class=astro-3EF6KSR2 xmlns=http://www.w3.org/2000/svg id=moon-svg><path d="M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z" class=astro-3EF6KSR2></path></svg> <svg class=astro-3EF6KSR2 xmlns=http://www.w3.org/2000/svg id=sun-svg><path d="M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z" class=astro-3EF6KSR2></path></svg></button></li></ul></nav></div></div><div class="max-w-3xl mx-auto px-4"><hr aria-hidden=true class=border-skin-line></div></header><div class="astro-VJ4TPSPI flex justify-start max-w-3xl mx-auto px-2 w-full"><button class="astro-VJ4TPSPI flex focus-outline hover:opacity-75 mb-2 mt-8" onclick=history.back()><svg class=astro-VJ4TPSPI xmlns=http://www.w3.org/2000/svg><path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class=astro-VJ4TPSPI></path></svg><span class=astro-VJ4TPSPI>Go back</span></button></div><main class=astro-VJ4TPSPI id=main-content><h1 class="astro-VJ4TPSPI post-title">使用github pages + issues + api建立个人博客</h1><div class="astro-VJ4TPSPI flex items-center my-2 opacity-80 space-x-2"><svg class="inline-block fill-skin-base h-6 scale-100 w-6" xmlns=http://www.w3.org/2000/svg aria-hidden=true><path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"></path><path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"></path></svg><span class=sr-only>Posted on:</span><span class="italic text-base">November 16, 2014<span aria-hidden=true> | </span><span class=sr-only> at </span>03:32 AM</span></div><article class="astro-VJ4TPSPI max-w-3xl mx-auto mt-8 prose" id=article role=article><p>[2023-05-28] 本博客已经基于<a href=https://github.com/satnaing/astro-paper>astro-paper</a> + <a href=https://giscus.app/ >giscus</a>重写</p><p>[2018-09-27] 此文已经 outdated，我使用 angular 6 重写了这个 blog system. 现在只需 fork 并简单操作即可使用。see <a href=https://github.com/martin-liu/martin-liu.github.io#how-to-use-it>instructions</a>. 不过原理仍是类似的，此文可作为参考.</p><h2 id=table-of-contents>Table of contents</h2><p></p><details><summary>Open Table of contents</summary><p></p><ul><li><a href=#%E4%BB%A5%E4%B8%8B%E4%B8%BA%E6%97%A7%E6%96%87>以下为旧文</a></li><li><a href=#%E5%89%8D%E8%A8%80>前言</a></li><li><a href=#%E5%8E%9F%E7%90%86%E5%B0%B1%E4%B8%80%E5%8F%A5%E8%AF%9D>原理就一句话</a></li><li><a href=#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D>基本介绍</a></li><li><a href=#%E4%B8%BA%E4%BD%95%E4%B8%8D%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8-issues-%E4%BD%9C%E4%B8%BA%E5%8D%9A%E5%AE%A2>为何不直接使用 issues 作为博客</a></li><li><a href=#%E6%88%91%E7%9A%84%E7%8E%A9%E6%B3%95>我的玩法</a></li><li><a href=#%E4%B8%8A%E9%85%B8%E8%8F%9C%E5%92%8C%E4%BB%A3%E7%A0%81>上酸菜和代码</a></li><li><a href=#next>Next</a></li><li><a href=#%E6%9C%80%E5%90%8E>最后</a></li></ul><p></p></details><p></p><h2 id=以下为旧文>以下为旧文</h2><h2 id=前言>前言</h2><p>最近写了一个<a href=http://martin-liu.github.io/ >简单的博客</a>并放在<a href=https://github.com>github</a>上，在此详述一下细节，以为分享。</p><p>方法并不高端，但是：</p><ol><li>简单易行不要钱。 <code>不需要数据库，不需要服务器，不需要域名</code>，因为 github 都帮我们做了，<strong>壮哉我大 github</strong>！</li><li>完全自定义的纯 HTML/JS/CSS 代码。不需要学各种 static site generator 的玩法，又能实现独一无二的个人博客 </li></ol><p>好了，废话稍止，进入正文。</p><h2 id=原理就一句话>原理就一句话</h2><p>写<code>前端代码</code>并 host 在<a href=https://pages.github.com/ >github pages</a>, 利用<a href=https://guides.github.com/features/issues/ >github issues</a>做为后台, 通过<a href=https://developer.github.com/v3/ >github API</a>完成前后端交互</p><h2 id=基本介绍>基本介绍</h2><ul><li><p><a href=https://pages.github.com/ >github pages</a></p><blockquote><ul><li>Github 提供的托管<code>静态网页</code>的服务，基本使用方法是建立一个名为<code>YOUR_USER_NAME.github.io</code>的 repo, 并把代码 push 到<code>master</code> branch。</li><li>注意其只支持<code>静态内容</code>。</li><li>另外，如果你有自己的域名，也可以<a href=https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages/ >将域名指向 github pages</a></li></ul></blockquote></li><li><p><a href=https://guides.github.com/features/issues/ >github issues</a></p><blockquote><p>每个 github repo 自带的 tracking 系统，支持<a href=https://guides.github.com/features/mastering-markdown/ >markdown</a>, 代码高亮，图片，表格，emoji 表情</p></blockquote></li><li><p><a href=https://developer.github.com/v3/ >github API</a></p><blockquote><p>Github 提供的 API, 可以拿到你的<a href=https://developer.github.com/v3/issues/#list-issues>issues 内容</a>，可以<a href=https://developer.github.com/v3/markdown/ >render markdown</a>… 更多请看文档</p></blockquote></li></ul><h2 id=为何不直接使用-issues-作为博客>为何不直接使用 issues 作为博客</h2><p>事实上，直接使用 issues 作为博客也是可行的，从这个角度，就是把 github issues 当成博客平台。<br>这个方案的缺陷是：</p><ul><li>Github issues 并不是为作为博客而设计的，博客平台的很多功能，比如推荐、SEO 等都是没有的</li><li>你将受限于 github 的 UI 和用户（需要注册才能评论），无法自由的定义你想要的 UI 和交互</li></ul><p>而使用 github API 来构建 no backend app, 即可以合理利用 github 提供的强大功能，又能随心所欲的定义自己的网站，还能集成任意的第三方服务（评论、分享等），十分潇洒</p><h2 id=我的玩法>我的玩法</h2><p>本博客基于<a href=https://github.com/martin-liu/m-angular-boilerplate>m-angular-boilerplate</a>开发，这是我写的一个<code>前端快速开发框架</code>，主要技术为<code>angularJS + bootstrap + grunt + coffeeScript</code>，有兴趣的朋友可以看看。😀</p><p>这个框架的 scope 不同于博客系统，在此先不多说。本文会主讲博客涉及到的内容。</p><h2 id=上酸菜和代码>上酸菜和代码</h2><p>首先要在 Github 上建立 repo，名字为<code>YOUR_USER_NAME.github.io</code>, 比如我的<code>martin-liu.github.io</code>。 拉到本地后开始 coding。 以下为 coffee 编译出来的 js 代码，主要使用 angularJS，如用其它框架实现，按同样的原理来就是</p><ol><li><p>注册 routing。就是把 url 和页面逻辑对应，比如<code>http://martin-liu.github.io/#!/</code>这个 url 就找<code>partials/home.html</code>这个 html，并执行<code>HomeCtrl</code>这个 function。如果找不到，就去 404 页面</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#e5c07b>angular</span><span style=color:#abb2bf>.</span><span style=color:#61afef>forEach</span><span style=color:#abb2bf>(</span><span style=color:#e5c07b>Config</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>routes</span><span style=color:#abb2bf>, </span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>route</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#e5c07b>route</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>params</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>&#x26;&#x26;</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>!</span><span style=color:#e5c07b>route</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>params</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>controller</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e5c07b>route</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>params</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>controller</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#98c379>"BaseCtrl"</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  }</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e5c07b>$routeProvider</span><span style=color:#abb2bf>.</span><span style=color:#61afef>when</span><span style=color:#abb2bf>(</span><span style=color:#e5c07b>route</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>url</span><span style=color:#abb2bf>, </span><span style=color:#e5c07b>route</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>params</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>});</span></span>
<span class=line><span style=color:#e5c07b>$routeProvider</span><span style=color:#abb2bf>.</span><span style=color:#61afef>otherwise</span><span style=color:#abb2bf>({</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e06c75>templateUrl</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"partials/404.html"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>});</span></span></code></pre><p>Config.routes 内容为:</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#abb2bf>[</span></span>
<span class=line><span style=color:#abb2bf>  {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>url</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"/"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>params</span><span style=color:#abb2bf>: {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>name</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"home"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>label</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"Home"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>templateUrl</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"partials/home.html"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>controller</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"HomeCtrl"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>    },</span></span>
<span class=line><span style=color:#abb2bf>  },</span></span>
<span class=line><span style=color:#abb2bf>  {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>url</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"/article/:id"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>params</span><span style=color:#abb2bf>: {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>name</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"article"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>hide</span><span style=color:#abb2bf>: </span><span style=color:#d19a66>true</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>templateUrl</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"partials/article.html"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>controller</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"ArticleCtrl"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>    },</span></span>
<span class=line><span style=color:#abb2bf>  },</span></span>
<span class=line><span style=color:#abb2bf>  {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>url</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"/about"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>params</span><span style=color:#abb2bf>: {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>name</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"about"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>label</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"About"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>templateUrl</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"partials/about.html"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>    },</span></span>
<span class=line><span style=color:#abb2bf>  },</span></span>
<span class=line><span style=color:#abb2bf>];</span></span></code></pre></li><li><p>Home 页面的实现</p><ul><li><p>拿<a href=https://developer.github.com/v3/issues/#list-issues>issues 内容</a></p><p>我的 api link 为 <a href="https://api.github.com/repos/martin-liu/martin-liu.github.io/issues?labels=blog&#x26;page=1&#x26;per_page=10&#x26;state=open">https://api.github.com/repos/martin-liu/martin-liu.github.io/issues?labels=blog&#x26;page=1&#x26;per_page=10&#x26;state=open</a></p></li></ul><p>code 如下，<code>BlogRemoteService.getBlogs()</code>就是 ajax call 刚刚那个 url，拿 issues 数据</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#e5c07b>BlogRemoteService</span><span style=color:#abb2bf>.</span><span style=color:#61afef>getBlogs</span><span style=color:#abb2bf>().</span><span style=color:#61afef>then</span><span style=color:#abb2bf>(</span></span>
<span class=line><span style=color:#abb2bf>  (</span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>_this</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>blogs</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> (</span><span style=color:#e5c07b>_this</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>data</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>blogs</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>_this</span><span style=color:#abb2bf>.</span><span style=color:#61afef>processBlogs</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>blogs</span><span style=color:#abb2bf>));</span></span>
<span class=line><span style=color:#abb2bf>    };</span></span>
<span class=line><span style=color:#abb2bf>  })(</span><span style=color:#e5c07b>this</span><span style=color:#abb2bf>)</span></span>
<span class=line><span style=color:#abb2bf>);</span></span>
<span class=line></span>
<span class=line><span style=color:#61afef>processBlogs</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>blogs</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>_</span><span style=color:#abb2bf>.</span><span style=color:#61afef>map</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>blogs</span><span style=color:#abb2bf>, </span><span style=color:#e5c07b>BlogService</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>decorateBlog</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>};</span></span></code></pre><p>BlogService.decorateBlog 就是下面的取 summary</p><ul><li>文章 summary <img alt=image src=https://cloud.githubusercontent.com/assets/1459760/5057351/82a753b2-6cf5-11e4-89f9-99ca6b8f7cea.png></li></ul><p>可以看到，文章内容有一段注释，里面是 json 代码。注释不会显示，但可被获取，做为 metadata</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#56b6c2>&#x3C;!--</span></span>
<span class=line><span style=color:#abb2bf>{</span></span>
<span class=line><span style=color:#98c379>"summary"</span><span style=color:#abb2bf>:</span><span style=color:#98c379>"渺小如我们，是风吹动水面，是蝴蝶一次振翅。在正确的位置，也能掀起远方的风暴；找到那个支点，也能撬动地球。"</span></span>
<span class=line><span style=color:#abb2bf>}</span></span>
<span class=line><span style=color:#56b6c2>--></span></span></code></pre><p>BlogService.decorateBlog 的内容如下，用来解析注释内容，赋值给<code>blog.meta</code></p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#abb2bf>    decorateBlog: </span><span style=color:#c678dd>function</span><span style=color:#abb2bf>(</span><span style=color:#e06c75;font-style:italic>blog</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>e</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>meta</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>metaStr</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#56b6c2>!</span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>body</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e06c75>blog</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>      }</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>metaStr</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>body</span><span style=color:#abb2bf>.</span><span style=color:#61afef>substring</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>, </span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>body</span><span style=color:#abb2bf>.</span><span style=color:#61afef>indexOf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>'-->'</span><span style=color:#abb2bf>));</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e06c75>metaStr</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>metaStr</span><span style=color:#abb2bf>.</span><span style=color:#61afef>replace</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>/\n</span><span style=color:#abb2bf>|</span><span style=color:#e06c75>\r</span><span style=color:#abb2bf>|</span><span style=color:#e06c75>&#x3C;!-</span><span style=color:#d19a66>{2,}</span><span style=color:#e06c75>/</span><span style=color:#c678dd>gm</span><span style=color:#abb2bf>, </span><span style=color:#98c379>' '</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>try</span><span style=color:#abb2bf> {</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#e06c75>meta</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>JSON</span><span style=color:#abb2bf>.</span><span style=color:#61afef>parse</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>metaStr</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>      } </span><span style=color:#c678dd>catch</span><span style=color:#abb2bf> (</span><span style=color:#e06c75>_error</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#e06c75>e</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>_error</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#e5c07b>console</span><span style=color:#abb2bf>.</span><span style=color:#61afef>log</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>e</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>      }</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>meta</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>meta</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>meta</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>summary</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#e5c07b>BlogRemoteService</span><span style=color:#abb2bf>.</span><span style=color:#61afef>renderMarkdown</span><span style=color:#abb2bf>(</span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>meta</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>summary</span><span style=color:#abb2bf>).</span><span style=color:#61afef>then</span><span style=color:#abb2bf>(</span><span style=color:#c678dd>function</span><span style=color:#abb2bf>(</span><span style=color:#e06c75;font-style:italic>data</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>          </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>meta</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>summary</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>data</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>        });</span></span>
<span class=line><span style=color:#abb2bf>      }</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e06c75>blog</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>    }</span></span></code></pre><ul><li>html 页面, 展示 blog list, 带 summary。如果不用 angularJS, 用<a href=http://handlebarsjs.com/ >handlebars</a>或<a href=http://mustache.github.io/ >mustache</a>也可轻松实现</li></ul><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>m-loading</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-if</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"!vm.data.blogs"</span><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>m-loading</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>div</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-if</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.blogs"</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-repeat</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"blog in vm.data.blogs"</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>div</span><span style=color:#abb2bf> </span><span style=color:#d19a66>style</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"cursor:pointer"</span></span>
<span class=line><span style=color:#abb2bf>     </span><span style=color:#d19a66>ng-click</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"Util.redirect('/article/' + blog.number)"</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>h3</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-bind</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"blog.title"</span><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>h3</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>p</span><span style=color:#abb2bf> </span><span style=color:#d19a66>class</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"summary"</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-bind-html</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"blog.meta.summary"</span><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>p</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>span</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-bind</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"blog.created_at | date:'yyyy-MM-dd'"</span><span style=color:#fff>&#x3C;/span</span><span style=color:#abb2bf>>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;/</span><span style=color:#e06c75>div</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>hr</span><span style=color:#abb2bf>/></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;/</span><span style=color:#e06c75>div</span><span style=color:#abb2bf>></span></span></code></pre></li><li><p>文章页面的实现</p><ul><li><p><a href=https://developer.github.com/v3/issues/#get-a-single-issue>拿文章内容</a></p><p>我的 api link 为<a href="https://api.github.com/repos/martin-liu/martin-liu.github.io/issues/3?labels=blog&#x26;page=1&#x26;per_page=10&#x26;state=open">https://api.github.com/repos/martin-liu/martin-liu.github.io/issues/3?labels=blog&#x26;page=1&#x26;per_page=10&#x26;state=open</a></p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#e5c07b>BlogRemoteService</span><span style=color:#abb2bf>.</span><span style=color:#61afef>getBlog</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>id</span><span style=color:#abb2bf>).</span><span style=color:#61afef>then</span><span style=color:#abb2bf>(</span></span>
<span class=line><span style=color:#abb2bf>  (</span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>_this</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>blog</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>body</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#e5c07b>_this</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>data</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>blog</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>BlogService</span><span style=color:#abb2bf>.</span><span style=color:#61afef>decorateBlog</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>blog</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#e5c07b>BlogRemoteService</span><span style=color:#abb2bf>.</span><span style=color:#61afef>renderMarkdown</span><span style=color:#abb2bf>(</span><span style=color:#e5c07b>blog</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>body</span><span style=color:#abb2bf>).</span><span style=color:#61afef>then</span><span style=color:#abb2bf>(</span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>ret</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>          </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> (</span><span style=color:#e5c07b>_this</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>data</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>content</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>ret</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>        });</span></span>
<span class=line><span style=color:#abb2bf>        </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> (</span><span style=color:#e5c07b>$rootScope</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>blog</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>_this</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>data</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>blog</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>      }</span></span>
<span class=line><span style=color:#abb2bf>    };</span></span>
<span class=line><span style=color:#abb2bf>  })(</span><span style=color:#e5c07b>this</span><span style=color:#abb2bf>)</span></span>
<span class=line><span style=color:#abb2bf>);</span></span></code></pre></li><li><p><a href=https://developer.github.com/v3/markdown/ >render markdown</a></p><p><code>post</code> blog.content 到<a href=https://api.github.com/markdown>https://api.github.com/markdown</a></p></li><li><p>html</p></li></ul><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>m-loading</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-if</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"!vm.data.content"</span><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>m-loading</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>div</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-if</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.content"</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>h2</span><span style=color:#abb2bf> </span><span style=color:#d19a66>class</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"align-center"</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-bind</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.blog.title"</span><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>h2</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>p</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#d19a66>ng-bind</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.blog.created_at | date:'yyyy-MM-dd hh:mm:ss'"</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#d19a66>class</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"created-at"</span></span>
<span class=line><span style=color:#abb2bf>  >&#x3C;/</span><span style=color:#e06c75>p</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>br</span><span style=color:#abb2bf> /></span></span>
<span class=line><span style=color:#abb2bf>  &#x3C;</span><span style=color:#e06c75>div</span><span style=color:#abb2bf> </span><span style=color:#d19a66>ng-bind-html</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.content"</span><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>div</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;/</span><span style=color:#e06c75>div</span><span style=color:#abb2bf>></span></span>
<span class=line></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>br</span><span style=color:#abb2bf> /></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>br</span><span style=color:#abb2bf> /></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>hr</span><span style=color:#abb2bf> /></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>p</span><span style=color:#abb2bf>>欢迎扫码订阅公众号:&#x3C;/</span><span style=color:#e06c75>p</span><span style=color:#abb2bf>></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>img</span><span style=color:#abb2bf> </span><span style=color:#d19a66>width</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"120"</span><span style=color:#abb2bf> </span><span style=color:#d19a66>src</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"/image/qrcode_wechat.jpg"</span><span style=color:#abb2bf> /></span></span>
<span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>div</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#d19a66>ng-if</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.blog.number"</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#d19a66>duoshuo</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#d19a66>data-thread-key</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"{{vm.data.blog.number}}"</span></span>
<span class=line><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>div</span><span style=color:#abb2bf>></span></span></code></pre></li><li><p>关于 css</p><p>css 主要是用的 bootstrap, 但是代码高亮是 copy from github, 代码在<a href=https://github.com/martin-liu/martin-liu.github.io/blob/staging/app/css/less/markdown.less>这里</a></p></li><li><p>使用<a href=http://duoshuo.com/ >多说评论</a>，<a href=http://tongji.baidu.com/web/welcome/login>百度统计</a>，<a href=http://www.jiathis.com/ >jiathis 社会化分享</a></p><p>需要到各自的网站上注册，得到相应代码</p><p>以下为异步加载多说和百度统计的代码</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#c678dd>function</span><span style=color:#abb2bf> </span><span style=color:#61afef>addScript</span><span style=color:#abb2bf>(</span><span style=color:#e06c75;font-style:italic>src</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>el</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>document</span><span style=color:#abb2bf>.</span><span style=color:#61afef>createElement</span><span style=color:#abb2bf>(</span><span style=color:#98c379>"script"</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e5c07b>el</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>src</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>src</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>s</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>document</span><span style=color:#abb2bf>.</span><span style=color:#61afef>getElementsByTagName</span><span style=color:#abb2bf>(</span><span style=color:#98c379>"script"</span><span style=color:#abb2bf>)[</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>];</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e5c07b>s</span><span style=color:#abb2bf>.</span><span style=color:#e5c07b>parentNode</span><span style=color:#abb2bf>.</span><span style=color:#61afef>insertBefore</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>el</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>s</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>}</span></span>
<span class=line></span>
<span class=line><span style=color:#7f848e;font-style:italic>// duoshuo</span></span>
<span class=line><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>duoshuoQuery</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e06c75>short_name</span><span style=color:#abb2bf>: </span><span style=color:#98c379>"martin-liu"</span><span style=color:#abb2bf>,</span></span>
<span class=line><span style=color:#abb2bf>};</span></span>
<span class=line></span>
<span class=line><span style=color:#7f848e;font-style:italic>// baidu statistics</span></span>
<span class=line><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>_hmt</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>_hmt</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>||</span><span style=color:#abb2bf> [];</span></span>
<span class=line><span style=color:#e5c07b>_hmt</span><span style=color:#abb2bf>.</span><span style=color:#61afef>push</span><span style=color:#abb2bf>([</span><span style=color:#98c379>"_setAutoPageview"</span><span style=color:#abb2bf>, </span><span style=color:#d19a66>false</span><span style=color:#abb2bf>]);</span></span>
<span class=line></span>
<span class=line><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>scriptSrcs</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> [</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#98c379>"http://static.duoshuo.com/embed.unstable.js"</span><span style=color:#abb2bf>, </span><span style=color:#7f848e;font-style:italic>// duoshuo</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#98c379>"//hm.baidu.com/hm.js?a67e974dea316e70836c07c3e3576a29"</span><span style=color:#abb2bf>, </span><span style=color:#7f848e;font-style:italic>// baidu statistics</span></span>
<span class=line><span style=color:#abb2bf>];</span></span>
<span class=line></span>
<span class=line><span style=color:#c678dd>for</span><span style=color:#abb2bf> (</span><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>i</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#d19a66>0</span><span style=color:#abb2bf>; </span><span style=color:#e06c75>i</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>&#x3C;</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>scriptSrcs</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>length</span><span style=color:#abb2bf>; </span><span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#61afef>addScript</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>scriptSrcs</span><span style=color:#abb2bf>[</span><span style=color:#e06c75>i</span><span style=color:#abb2bf>]);</span></span>
<span class=line><span style=color:#abb2bf>}</span></span></code></pre><p>另外，对于多说使用<a href=https://github.com/duoshuo/angular-duoshuo>angular-duoshuo</a>来支持 angularJS</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#abb2bf>&#x3C;</span><span style=color:#e06c75>div</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#d19a66>ng-if</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"vm.data.blog.number"</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#d19a66>duoshuo</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#d19a66>data-thread-key</span><span style=color:#abb2bf>=</span><span style=color:#98c379>"{{vm.data.blog.number}}"</span></span>
<span class=line><span style=color:#abb2bf>>&#x3C;/</span><span style=color:#e06c75>div</span><span style=color:#abb2bf>></span></span></code></pre><p>百度统计, url 变化时触发</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#e5c07b>$rootScope</span><span style=color:#abb2bf>.</span><span style=color:#61afef>$on</span><span style=color:#abb2bf>(</span><span style=color:#98c379>"$routeChangeSuccess"</span><span style=color:#abb2bf>, </span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>$event</span><span style=color:#abb2bf>, </span><span style=color:#e06c75;font-style:italic>current</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#e06c75>_hmt</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>_hmt</span><span style=color:#abb2bf>.</span><span style=color:#61afef>push</span><span style=color:#abb2bf>([</span><span style=color:#98c379>"_trackPageview"</span><span style=color:#abb2bf>, </span><span style=color:#e5c07b>$location</span><span style=color:#abb2bf>.</span><span style=color:#61afef>url</span><span style=color:#abb2bf>()]);</span></span>
<span class=line><span style=color:#abb2bf>  }</span></span>
<span class=line><span style=color:#abb2bf>});</span></span></code></pre></li><li><p>fork me on github</p><p>见<a href=https://github.com/blog/273-github-ribbons>https://github.com/blog/273-github-ribbons</a></p></li><li><p>使用<a href=http://locachejs.org/ >locache</a>做本地 cache, 减少 request 数量，提高用户体验。我设置为 5 分钟失效</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#e5c07b>this</span><span style=color:#abb2bf>.</span><span style=color:#61afef>getWithCache</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>key</span><span style=color:#abb2bf>, </span><span style=color:#e06c75;font-style:italic>isSession</span><span style=color:#abb2bf>, </span><span style=color:#e06c75;font-style:italic>getFunc</span><span style=color:#abb2bf>, </span><span style=color:#e06c75;font-style:italic>timeout</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>var</span><span style=color:#abb2bf> </span><span style=color:#e06c75>cache</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>data</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>defer</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>promise</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e06c75>cache</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e06c75>Cache</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#e06c75>isSession</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>cache</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>Cache</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>session</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  }</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e06c75>defer</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>$q</span><span style=color:#abb2bf>.</span><span style=color:#61afef>defer</span><span style=color:#abb2bf>();</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#e06c75>data</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>cache</span><span style=color:#abb2bf>.</span><span style=color:#61afef>get</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>key</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>  </span><span style=color:#c678dd>if</span><span style=color:#abb2bf> (</span><span style=color:#e06c75>data</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e5c07b>defer</span><span style=color:#abb2bf>.</span><span style=color:#61afef>resolve</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>data</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>defer</span><span style=color:#abb2bf>.</span><span style=color:#e06c75>promise</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  } </span><span style=color:#c678dd>else</span><span style=color:#abb2bf> {</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e06c75>promise</span><span style=color:#abb2bf> </span><span style=color:#56b6c2>=</span><span style=color:#abb2bf> </span><span style=color:#61afef>getFunc</span><span style=color:#abb2bf>();</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#e5c07b>promise</span><span style=color:#abb2bf>.</span><span style=color:#61afef>then</span><span style=color:#abb2bf>(</span><span style=color:#c678dd>function</span><span style=color:#abb2bf> (</span><span style=color:#e06c75;font-style:italic>data</span><span style=color:#abb2bf>) {</span></span>
<span class=line><span style=color:#abb2bf>      </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e5c07b>cache</span><span style=color:#abb2bf>.</span><span style=color:#61afef>set</span><span style=color:#abb2bf>(</span><span style=color:#e06c75>key</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>data</span><span style=color:#abb2bf>, </span><span style=color:#e06c75>timeout</span><span style=color:#abb2bf>);</span></span>
<span class=line><span style=color:#abb2bf>    });</span></span>
<span class=line><span style=color:#abb2bf>    </span><span style=color:#c678dd>return</span><span style=color:#abb2bf> </span><span style=color:#e06c75>promise</span><span style=color:#abb2bf>;</span></span>
<span class=line><span style=color:#abb2bf>  }</span></span>
<span class=line><span style=color:#abb2bf>};</span></span></code></pre></li><li><p>push 到 github，等几分钟，一个新鲜的热乎乎的博客就出现了!</p><p>以下是我的部署 script，因为有 build 过程(concat, uglify 之类)</p><pre class="astro-code one-dark-pro" is:raw="" style=background-color:#282c34;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word tabindex=0><code><span class=line><span style=color:#7f848e;font-style:italic>#!/bin/bash</span></span>
<span class=line><span style=color:#61afef>grunt</span><span style=color:#abb2bf> </span><span style=color:#98c379>build</span></span>
<span class=line><span style=color:#abb2bf>( </span><span style=color:#56b6c2>cd</span><span style=color:#abb2bf> </span><span style=color:#98c379>dist</span></span>
<span class=line><span style=color:#61afef>git</span><span style=color:#abb2bf> </span><span style=color:#98c379>init</span></span>
<span class=line><span style=color:#61afef>git</span><span style=color:#abb2bf> </span><span style=color:#98c379>add</span><span style=color:#abb2bf> </span><span style=color:#98c379>.</span></span>
<span class=line><span style=color:#61afef>git</span><span style=color:#abb2bf> </span><span style=color:#98c379>commit</span><span style=color:#abb2bf> </span><span style=color:#d19a66>-m</span><span style=color:#abb2bf> </span><span style=color:#98c379>"Deployed to Github Pages"</span></span>
<span class=line><span style=color:#61afef>git</span><span style=color:#abb2bf> </span><span style=color:#98c379>push</span><span style=color:#abb2bf> </span><span style=color:#d19a66>--force</span><span style=color:#abb2bf> </span><span style=color:#d19a66>--quiet</span><span style=color:#abb2bf> </span><span style=color:#98c379>"https://github.com/martin-liu/martin-liu.github.io.git"</span><span style=color:#abb2bf> </span><span style=color:#98c379>master</span></span>
<span class=line><span style=color:#abb2bf>)</span></span></code></pre></li></ol><h2 id=next>Next</h2><p>还有一些问题没有解决，如</p><ul class=contains-task-list><li class=task-list-item><input disabled=disabled type=checkbox> RSS</li><li class=task-list-item><input disabled=disabled type=checkbox> SEO</li></ul><h2 id=最后>最后</h2><p>可以看到，这是个非常简单的 blog，并不完善，但是 workable，可以在此基础上迭代开发。这一点相当重要，因为</p><blockquote><p>Done is better than perfect.(完成更胜完美)<br>— facebook 标语</p></blockquote></article><ul class="astro-VJ4TPSPI tags-container"><li class="astro-BLWJYJPT inline-block my-1 underline-offset-4"><a href=/tags/chinese class="astro-BLWJYJPT group pr-2 text-sm"><svg class="astro-BLWJYJPT scale-75" xmlns=http://www.w3.org/2000/svg><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class=astro-BLWJYJPT></path></svg> &nbsp;<span class=astro-BLWJYJPT>chinese</span></a></li><li class="astro-BLWJYJPT inline-block my-1 underline-offset-4"><a href=/tags/blog class="astro-BLWJYJPT group pr-2 text-sm"><svg class="astro-BLWJYJPT scale-75" xmlns=http://www.w3.org/2000/svg><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class=astro-BLWJYJPT></path></svg> &nbsp;<span class=astro-BLWJYJPT>blog</span></a></li></ul><script src=https://giscus.app/client.js async crossorigin=anonymous data-category=Announcements data-category-id=DIC_kwDOAY2ANs4CWzNL data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=title data-reactions-enabled=1 data-repo=martin-liu/martin-liu.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkyNjA1MDYxNA==" data-strict=0 data-theme=light_tritanopia></script></main><footer class="astro-SZ7XMLTE mt-auto"><div class="max-w-3xl mx-auto px-0"><hr aria-hidden=true class=border-skin-line></div><div class="astro-SZ7XMLTE footer-wrapper"><div class="astro-UPU6FZXR flex social-icons"><a href=https://github.com/martin-liu class="inline-block astro-5EUNQZKT group astro-UPU6FZXR link-button" title=" Martin Liu on Github" tabindex=0><svg class=icon-tabler xmlns=http://www.w3.org/2000/svg stroke-linecap=round stroke-linejoin=round><path d="M0 0h24v24H0z" fill=none stroke=none></path><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path></svg> </a><a href=https://www.linkedin.com/in/hflhmartin/ class="inline-block astro-5EUNQZKT group astro-UPU6FZXR link-button" title="Martin Liu on LinkedIn" tabindex=0><svg class=icon-tabler xmlns=http://www.w3.org/2000/svg stroke-linecap=round stroke-linejoin=round><path d="M0 0h24v24H0z" fill=none stroke=none></path><rect height=16 rx=2 width=16 x=4 y=4></rect><line x1=8 x2=8 y1=11 y2=16></line><line x1=8 x2=8 y1=8 y2=8.01></line><line x1=12 x2=12 y1=16 y2=11></line><path d="M16 16v-3a2 2 0 0 0 -4 0"></path></svg> </a><a href=mailto:hflhmartin@gmail.com class="inline-block astro-5EUNQZKT group astro-UPU6FZXR link-button" title="Send an email to Martin Liu" tabindex=0><svg class=icon-tabler xmlns=http://www.w3.org/2000/svg stroke-linecap=round stroke-linejoin=round><path d="M0 0h24v24H0z" fill=none stroke=none></path><rect height=14 rx=2 width=18 x=3 y=5></rect><polyline points="3 7 12 13 21 7"></polyline></svg></a></div><div class="astro-SZ7XMLTE copyright-wrapper"><span class=astro-SZ7XMLTE>Copyright &#169; 2024</span> <span class="astro-SZ7XMLTE separator">&nbsp;|&nbsp;</span> <span class=astro-SZ7XMLTE>All rights reserved.</span></div></div></footer></body></html>